# Simple-ToDo
Это Spring Boot приложение, реализующее Rest API для списка задач.
### Оно позволяет:
- Создавать, изменять, удалять задачи
- Использовать вложенные задачи (nested todos)
- Регистрировать и аутентифицировать пользователей(при помощи логина и пароля)
- Авторизовывать пользователей (при помощи JWT токенов)
- Закреплять за каждым пользователем, созданные им задачи

### Приложение использует следующий стек технологий:
- Spring Boot (Web, Data, Security)
- MapStruct
- Flyway
- JJWT JsonWebToken
- Lombok
- СУБД PostgreSQL
- Docker

### Запуск приложения
Перед первым запуском необходимо создать Docker-контейнер , содержащий СУБД. Для этого в корне проекта находится файл **docker-compose.yaml**. Когда контейнер работает, можно запускать само приложение. После запуска, оно становится доступным по адресу: http://localhost:8080
### API
**/api/todo**

Все запросы по данному маршруту (кроме маршрутов **/api/todo/register** и **/api/todo/auth**) могут выполнять только авторизованные пользователи. Для авторизации нужно получить токен. Далее в запрос нужно включить заголовок **Authorization**. Пример (вместо <ВАШ_ТОКЕН> нужно вставить полученный при авторизации токен):
```
GET /api/todo HTTP/1.1
Host: localhost:8080
Authorization: Bearer <ВАШ_ТОКЕН>
```
- `GET`: Получить список задач авторизованного пользователя
- `POST`: Добавить новую задачу
- `PUT`: Изменить существующую задачу

**/api/todo/:id**

- `DELETE`: Удалить задачу с заданным идентификатором

**/api/todo/register**
- `POST`: Зарегистрировать нового пользователя

**/api/todo/auth**
- `POST`: Аутентифицировать пользователя и получить токен

## Примеры использования API
### Регистрация пользователя
Для регистрации надо задать имя пользователя и пароль.
```
POST /api/todo/register HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Content-Length: 51

{
    "username": "test",
    "password": "12345"
}
```
### Авторизация пользователя
Для авторизации тоже нужно задать имя пользователя и пароль.
```
POST /api/todo/auth HTTP/1.1
Host: localhost:8080
Content-Type: application/json
Content-Length: 54

{
    "username": "test",
    "password": "12345"
}
```
При успешной авторизации пользователь получит в ответе токен.

### Создание задачи
```
POST /api/todo HTTP/1.1
Host: localhost:8080
Authorization: Bearer <ВАШ_ТОКЕН>
Content-Type: application/json
Content-Length: 47

{
    "title": "Позаниматься иностранным языком",
    "parent": 2
}
```
Здесь **title** - это описание задачи.
В данном примере использован необязательный параметр parent, который требуется указать если нужно задать "родительскую" задачу.

### Изменение задачи
```
PUT /api/todo HTTP/1.1
Host: localhost:8080
Authorization: Bearer <ВАШ_ТОКЕН>
Content-Type: application/json
Content-Length: 65

{
    "id": 1,
    "title": "Измененная задача",
    "done": true
}
```
Здесь **id** - это идентификатор изменяемой задачи в БД, **title** - измененное описание задачи, **done** - это флаг, сигнализирующий о том, что задача уже выполнена или нет.

### Удаление задачи
```
DELETE /api/todo/<ИДЕНТИФИКАТОР_УДАЛЯЕМОЙ_ЗАДАЧИ> HTTP/1.1
Host: localhost:8080
Authorization: Bearer <ВАШ_ТОКЕН>
```
Здесь вместо **<ИДЕНТИФИКАТОР_УДАЛЯЕМОЙ_ЗАДАЧИ>** нужно вставить этот самый идентификатор.
